# osagoService

API - https://docs.google.com/document/d/1XXpswaoixsq5-1197NE9K_0dfwYtx3rtZzt8VtgksAo/edit?usp=sharing

### Авторизация пользователя

/login – POST.

Авторизацию делаем через куки

### Получение списка страховых компаний

/getInsuranceCompanies - GET

Возвращает список доступных страховых компаний:
```js
[
  {
    id: string,
    name: string,
    logoPath: string
  }
]
```

### Проверка поля у страховой компании

/checkField?params – GET

Params:
* id – идентификатор страховой компании
* name – унифицированное имя проверяемого поля (унифицированное потому, что наверняка поле «марка ТС» будет называться по-разному в страховых компаниях и на бэке нужно будет хранить соответствие нашего унифицированного названия названиям в каждой из страховых.
* value -  значение проверяемого поля.
* title – текстовое значение проверяемого поля

Возвращает данные о проверенном поле:
```js
{
  name: string,
  title: string,
  fields: [
    {
      id: string,
      title: string,
    }
  ],
  meta: {
    id: string,
    value: string,
  } 
}
```

Где:
* name - унифицированное имя проверенного поля
* title - текстовое значение проверенного поля,
* fields – список предлагаемых полей, со стороны страховой компании
* id - идентификатор страховой компании
* value - значение проверенного поля

Примечание: после проверки поля, например, ‘vehicleBrand’, я буду формировать отдельные поля формы для каждой страховой компании, которые в последствии будут улетать на бэк, для получения окончательных рассчетов. Надо обсудить как это делать. Я предлагаю отправлять поле ‘vehicleBrand’ со значением из базового поля + поля ‘vehicleBrand-id123123123’ с значением для соответствующей страховой компании (123123123 – это id страховой)

### Получение дефолтных списков для формы
/getSelectValues - GET

Возвращает списки данных, доступные для выбора в соответствующих полях формы:
```js
{
  [fieldName]: [
    {
      id: string,
      title: string
    } 
  ] 
}
```
Где:
* fieldName - название конкретного поля, для которого предназначен список

Возможные варианты для fieldName:
* vehicleBrands - марки ТС
* vehicleModels - модели ТС
* documentType - тип документа
* usePurpose - цель использования
* category - категория

### Получение данных о страховке + запись расчета.
/makeCalculation – POST

Параметры в теле запроса:

Перечень всех полей формы (опишу их чуть позже)

Возвращает ответ от страховой компании:

Модель тоже опишу позднее, когда будет понятно, что присылают страховые

### Получение данных о предыдущих расчетах.
/getCalculations – GET

Возвращает список предыдущих расчетов по пользователю:

Модель опишу позднее, когда будет известно, какие данные нужно отображать в таблице.

### Получение конкретного расчета.
/getCalculation?params – GET

params:
* id – идентификатор расчета

Возвращает расчет по его id:

Модель будет содержать все данные, записанные в бд

### Редактирование конкретного расчета.
/updateCalculation – PUT

Параметры в теле запроса:

Перечень всех полей  позднее
